<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pausen-Jury ‚Äì Foyer-Simulation</title>
<style>
:root {
  --bg:#0b0b0b;
  --card:#191919;
}
* { box-sizing:border-box; }
body {
  margin:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: var(--bg);
  color:#fff;
}
/* Top button */
.back-btn{
  position:fixed;
  top:16px;
  left:16px;
  z-index:40;
  padding:8px 14px;
  border-radius:999px;
  border:none;
  background:rgba(0,0,0,0.7);
  color:#fff;
  cursor:pointer;
  font-size:0.95rem;
  display:flex;
  align-items:center;
  gap:6px;
}

/* Sections */
.section{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:80px 16px 40px;
  opacity:1;
  transform:translateX(0);
  transition:opacity .4s ease, transform .4s ease;
}
.section.hidden{
  opacity:0;
  pointer-events:none;
  transform:translateX(-40px);
}
.section.right{
  transform:translateX(40px);
}

h1,h2{margin:0;font-weight:600;}
h1{font-size:2.1rem;margin-bottom:10px;}
h2{font-size:1.4rem;margin-bottom:4px;}
p{margin:0;}
.sub{color:#ccc;font-size:0.95rem;}

/* Trailer */
.trailer-wrapper{
  width:100%;
  max-width:960px;
  border-radius:18px;
  overflow:hidden;
  box-shadow:0 24px 60px rgba(0,0,0,0.75);
  position:relative;
}
.trailer-video{
  width:100%;
  display:block;
  background:#000;
}
.trailer-overlay{
  position:absolute;
  inset:0;
  background:linear-gradient(to top, rgba(0,0,0,0.7), transparent 40%);
  pointer-events:none;
}
.trailer-caption{
  position:absolute;
  left:20px;
  bottom:18px;
  text-align:left;
  pointer-events:none;
}
.trailer-caption h2{font-size:1.5rem;}
.trailer-caption p{font-size:0.9rem;color:#ddd;}
.mute-toggle{
  position:absolute;
  top:14px;
  right:14px;
  border:none;
  border-radius:999px;
  padding:8px 12px;
  font-size:1.1rem;
  cursor:pointer;
  background:rgba(0,0,0,0.65);
  color:#fff;
  display:flex;
  align-items:center;
  gap:6px;
}
.primary-btn{
  margin-top:24px;
  padding:12px 22px;
  border-radius:999px;
  border:none;
  background:#f5f0e8;
  color:#111;
  font-weight:600;
  cursor:pointer;
  font-size:1rem;
}

/* Foyer grid */
.foyer-header{text-align:center;margin-bottom:20px;}
.foyer-grid{
  width:100%;
  max-width:1100px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
}
.person-card{
  background:var(--card);
  border-radius:18px;
  padding:14px;
  cursor:pointer;
  display:flex;
  flex-direction:column;
  align-items:center;
  box-shadow:0 14px 35px rgba(0,0,0,0.6);
  transform:translateY(0);
  transition:transform .25s ease, box-shadow .25s ease;
}
.person-card:hover{
  transform:translateY(-4px);
  box-shadow:0 18px 45px rgba(0,0,0,0.8);
}
.person-img{
  width:100%;
  border-radius:14px;
  margin-bottom:10px;
}
.person-name{font-weight:600;margin-bottom:4px;}
.person-tag{font-size:0.85rem;color:#aaa;}

.info{margin-top:18px;font-size:0.85rem;color:#aaa;}
.disabled{opacity:0.35;pointer-events:none;}

/* Modal */
.modal-backdrop{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.7);
  display:none;
  align-items:center;
  justify-content:center;
  padding:16px;
  z-index:30;
}
.modal-backdrop.active{display:flex;}
.modal{
  background:#f5f0e8;
  color:#111;
  border-radius:18px;
  max-width:560px;
  width:100%;
  max-height:90vh;
  overflow:auto;
  transform:translateY(20px);
  opacity:0;
  transition:opacity .25s ease, transform .25s ease;
}
.modal.active{
  transform:translateY(0);
  opacity:1;
}
.modal img{
  width:100%;
  border-radius:18px 18px 0 0;
  display:block;
}
.modal-body{padding:18px 20px 20px;}
.modal-body h3{margin:0 0 4px;}
.modal-body p{margin-top:10px;line-height:1.45;font-size:0.98rem;}

/* Final choice */
.choice-wrapper{max-width:640px;width:100%;}
.choice-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
  margin-top:26px;
}
.choice-card{
  background:var(--card);
  border-radius:18px;
  padding:20px 16px;
  cursor:pointer;
  box-shadow:0 18px 45px rgba(0,0,0,0.7);
  border:2px solid transparent;
  transition:transform .25s ease, box-shadow .25s ease, border-color .25s ease, background .25s ease;
}
.choice-card:hover{
  transform:translateY(-3px);
  box-shadow:0 24px 55px rgba(0,0,0,0.85);
  border-color:#f5f0e8;
}
.choice-title{font-weight:600;margin-bottom:8px;}
.choice-desc{font-size:0.9rem;color:#ccc;}
.choice-card span.emoji{
  font-size:2rem;
  display:block;
  margin-bottom:10px;
}

@media (max-width: 720px){
  .trailer-caption h2{ font-size:1.1rem; }
  .trailer-caption p{ font-size:0.8rem; }
}
</style>
</head>
<body>

<button class="back-btn" onclick="location.href='index.html'">üè† Hauptmen√º</button>

<section id="introSection" class="section">
  <div class="trailer-wrapper">
    <video id="trailerVideo" class="trailer-video" autoplay muted loop playsinline>
      <source src="Trailer_Foyer.mp4" type="video/mp4">
      Dein Browser unterst√ºtzt das Video-Format nicht.
    </video>
    <div class="trailer-overlay"></div>
    <button id="muteBtn" class="mute-toggle" type="button">üîá Ton einschalten</button>
    <div class="trailer-caption">
      <h2>Pausen-Jury im Theaterfoyer</h2>
      <p>Der erste Akt ist vorbei. Im Foyer diskutiert das Publikum ‚Äì wie w√ºrdest du entscheiden?</p>
    </div>
  </div>
  <button id="toFoyerBtn" class="primary-btn" type="button">Weiter in die Pause</button>
</section>

<section id="foyerSection" class="section hidden right">
  <div class="foyer-header">
    <h1>Pausengespr√§che im Foyer</h1>
    <p class="sub">Klicke auf die Personen und h√∂re dir ihre Perspektive zu Lars Koch an.</p>
  </div>

  <div id="foyerGrid" class="foyer-grid"></div>

  <div class="info">
    Tipp: Die Bilder werden nur angezeigt, wenn <code>Pilotenkollege.jpg</code>,
    <code>Juristin.jpg</code>, <code>Fussballfan.jpg</code>,
    <code>Philosophieprofessor.jpg</code> und <code>Feuerwehrmann.jpg</code> im selben Ordner liegen.
  </div>

  <button id="decisionBtn" class="primary-btn disabled" type="button">
    Ich bin bereit f√ºr die Entscheidung
  </button>
  <div class="info">Der Button wird aktiv, nachdem du mindestens zwei Personen angeh√∂rt hast.</div>
</section>

<section id="finalSection" class="section hidden right">
  <div class="choice-wrapper">
    <h1>Zur√ºck in den Saal ‚Äì deine Entscheidung</h1>
    <p class="sub">
      Stelle dir vor, du stehst vor den beiden Eing√§ngen zum Saal. Durch welche T√ºr gehst du?
    </p>

    <div class="choice-grid">
      <div class="choice-card" onclick="chooseVerdict('schuldig')">
        <span class="emoji">‚öñÔ∏è</span>
        <div class="choice-title">Eingang ‚ÄûSchuldig‚Äú</div>
        <div class="choice-desc">
          Du schlie√üt dich der Auffassung an, dass Lars Koch gegen Recht und Verfassung versto√üen hat
          und f√ºr den Abschuss strafrechtlich verantwortlich ist.
        </div>
      </div>
      <div class="choice-card" onclick="chooseVerdict('unschuldig')">
        <span class="emoji">üïäÔ∏è</span>
        <div class="choice-title">Eingang ‚ÄûUnschuldig‚Äú</div>
        <div class="choice-desc">
          Du gehst davon aus, dass Lars Koch in einer extremen Ausnahmesituation richtig gehandelt hat
          und nicht bestraft werden sollte.
        </div>
      </div>
    </div>

    <div class="info" id="resultInfo" style="margin-top:22px;"></div>
  </div>
</section>

<div id="modalBackdrop" class="modal-backdrop" onclick="closeModal()">
  <div id="modal" class="modal" onclick="event.stopPropagation()">
    <img id="modalImg" src="" alt="">
    <div class="modal-body">
      <h3 id="modalName"></h3>
      <small id="modalRole" style="color:#555;"></small>
      <p id="modalText"></p>
    </div>
  </div>
</div>

<audio id="foyerAmbience" loop>
  <source src="Foyer_Gemurmel.mp3" type="audio/mpeg">
</audio>

<script>
const trailer = document.getElementById('trailerVideo');
const muteBtn = document.getElementById('muteBtn');
let trailerMuted = true;

muteBtn.addEventListener('click', () => {
  trailerMuted = !trailerMuted;
  trailer.muted = trailerMuted;
  muteBtn.textContent = trailerMuted ? 'üîá Ton einschalten' : 'üîä Ton ausschalten';
});

const introSection = document.getElementById('introSection');
const foyerSection = document.getElementById('foyerSection');
const finalSection = document.getElementById('finalSection');
const toFoyerBtn = document.getElementById('toFoyerBtn');
const decisionBtn = document.getElementById('decisionBtn');
const ambience = document.getElementById('foyerAmbience');

function showSection(from, to){
  if(from){
    from.classList.add('hidden');
    from.classList.remove('right');
  }
  if(to){
    to.classList.remove('hidden');
  }
}

toFoyerBtn.addEventListener('click', () => {
  showSection(introSection, foyerSection);
  try {
    ambience.volume = 0.25;
    ambience.play().catch(()=>{});
  } catch(e){}
});

const persons = [
  {
    id:'pilot',
    name:'Pilotenkollege',
    role:'Offizier der Luftwaffe',
    img:'Pilotenkollege.jpg',
    text:'Er hat getan, was jeder Pilot in so einer Lage tun w√ºrde. Die Tat war furchtbar, aber notwendig. Zum Gl√ºck hatte Lars Koch die Kraft, in diesem Moment zu entscheiden.'
  },
  {
    id:'juristin',
    name:'Juristin',
    role:'Verfassungsrechtlerin',
    img:'Juristin.jpg',
    text:'Niemand steht √ºber dem Gesetz. Es gibt etwas, das h√∂her zu gewichten ist als das individuelle Gewissen ‚Äì die Verfassung. Vor dem Gesetz sind alle gleich, und der Mensch darf nicht versuchen, Gott zu spielen.'
  },
  {
    id:'fan',
    name:'Fussballfan',
    role:'Dauerkartenbesitzer der Arena',
    img:'Fussballfan.jpg',
    text:'Ich war selber √∂fter in der Arena. Es h√§tte jeden treffen k√∂nnen ‚Äì Freunde, Familie, mich. Lars Koch musste handeln, sonst w√§ren Zehntausende ohne jede Chance gewesen.'
  },
  {
    id:'prof',
    name:'Philosophieprofessor',
    role:'Ethiker',
    img:'Philosophieprofessor.jpg',
    text:'Deontologie oder Utilitarismus ‚Äì das ist hier die Frage. Opfere ich wenige, um viele zu retten, oder bleibt das T√∂ten Unbeteiligter immer falsch? Die Antwort sagt viel dar√ºber aus, welches Menschenbild wir vertreten.'
  },
  {
    id:'fire',
    name:'Feuerwehrmann',
    role:'Einsatzleiter',
    img:'Feuerwehrmann.jpg',
    text:'Wenn es brennt, muss man handeln. Mit langem Abw√§gen kommt man immer zu sp√§t. Die Juristen sprechen vom ‚Äû√ºbergesetzlichen Notstand‚Äú ‚Äì manchmal trifft das den Einsatzalltag ziemlich gut.'
  }
];

const foyerGrid = document.getElementById('foyerGrid');
const heardSet = new Set();

function createCard(p){
  const card = document.createElement('div');
  card.className = 'person-card';
  card.dataset.id = p.id;

  const img = document.createElement('img');
  img.className = 'person-img';
  img.src = p.img;
  img.alt = p.name;
  img.onerror = function(){ this.style.display='none'; };

  const nameEl = document.createElement('div');
  nameEl.className = 'person-name';
  nameEl.textContent = p.name;

  const tag = document.createElement('div');
  tag.className = 'person-tag';
  tag.textContent = p.role;

  card.appendChild(img);
  card.appendChild(nameEl);
  card.appendChild(tag);

  card.addEventListener('click', () => {
    openModal(p);
    heardSet.add(p.id);
    if(heardSet.size >= 2){
      decisionBtn.classList.remove('disabled');
    }
  });

  return card;
}

function renderFoyer(){
  const shuffled = [...persons];
  for(let i=shuffled.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  shuffled.forEach(p => foyerGrid.appendChild(createCard(p)));
}
renderFoyer();

const modalBackdrop = document.getElementById('modalBackdrop');
const modalEl = document.getElementById('modal');
const modalImg = document.getElementById('modalImg');
const modalName = document.getElementById('modalName');
const modalRole = document.getElementById('modalRole');
const modalText = document.getElementById('modalText');

function openModal(p){
  modalImg.src = p.img;
  modalName.textContent = p.name;
  modalRole.textContent = p.role;
  modalText.textContent = p.text;
  modalBackdrop.classList.add('active');
  requestAnimationFrame(()=> modalEl.classList.add('active'));
}
function closeModal(){
  modalEl.classList.remove('active');
  setTimeout(()=> modalBackdrop.classList.remove('active'), 180);
}

decisionBtn.addEventListener('click', () => {
  if(decisionBtn.classList.contains('disabled')) return;
  showSection(foyerSection, finalSection);
});

const resultInfo = document.getElementById('resultInfo');
function chooseVerdict(choice){
  try {
    localStorage.setItem('juryDecision', choice);
  } catch(e){}
  const text = choice === 'schuldig'
    ? 'Du hast dich f√ºr SCHULDIG entschieden. Deine Wahl wurde lokal im Browser gespeichert.'
    : 'Du hast dich f√ºr UNSCHULDIG entschieden. Deine Wahl wurde lokal im Browser gespeichert.';
  resultInfo.textContent = text;
}
</script>

</body>
</html>
